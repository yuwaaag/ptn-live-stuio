<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN NEWS - REPORTER LIVE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@700;900&display=swap');
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Noto Sans Devanagari', sans-serif; }
        
        #reporter-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; }

        .ui-overlay { position: relative; width: 100%; height: 100%; z-index: 10; display: flex; flex-direction: column; justify-content: flex-end; }
        
        .breaking-tag { position: absolute; top: 40px; left: 0; background: #cc0000; color: #fff; padding: 15px 40px; font-size: 45px; font-weight: 900; border-right: 10px solid #ffcc00; box-shadow: 10px 10px 20px rgba(0,0,0,0.5); }
        .rep-label { position: absolute; bottom: 260px; left: 30px; background: rgba(0,0,0,0.8); color: #ffcc00; padding: 10px 30px; font-size: 28px; border-left: 8px solid #ffcc00; }

        .headline-box { width: 100%; background: linear-gradient(to top, #000 90%, transparent); padding: 50px 20px; border-top: 10px solid #ffcc00; box-sizing: border-box; }
        .headline-text { color: #fff; font-size: 52px; text-align: center; margin: 0; font-weight: 700; line-height: 1.3; text-shadow: 3px 3px 10px #000; }

        #start-btn { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; color: #ffcc00; }
    </style>
</head>
<body>

    <div id="start-btn" onclick="startEngine()">
        <h1 style="font-size: 60px; margin: 0;">PTN LIVE STUDIO</h1>
        <p style="color: white; font-size: 24px;">[ ‡§ñ‡§¨‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§≤‡§æ‡§á‡§µ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ]</p>
    </div>

    <video id="reporter-video" muted playsinline></video>

    <div class="ui-overlay">
        <div class="breaking-tag">LIVE REPORTING</div>
        <div id="rep-info" class="rep-label">‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§∞: ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡§ø‡§Ç‡§ó...</div>
        <div class="headline-box">
            <p id="news-text" class="headline-text">‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∞‡•Å‡§ï‡•á‡§Ç...</p>
        </div>
    </div>

    <script>
        let newsQueue = [];
        let currentIndex = 0;
        const videoPlayer = document.getElementById('reporter-video');
        
        // üõë ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ Google Apps Script URL ‡§°‡§æ‡§≤‡•á‡§Ç
        const apiURL = "https://script.google.com/macros/s/AKfycbxdC0A-qyh_zT4zIcXWsWoCpNfkooytB-B0z3UXTWyWDqseUVHZOd6iQIweMx4vI0GfZA/exec"; 

        async function fetchNews() {
            try {
                const response = await fetch(apiURL);
                const data = await response.json();
                if (data.length > 0) {
                    newsQueue = data;
                    console.log("News Data Received:", newsQueue.length);
                }
            } catch (e) { console.error("Error fetching news"); }
        }

        function playNext() {
            if (newsQueue.length === 0) {
                setTimeout(playNext, 3000);
                return;
            }

            const current = newsQueue[currentIndex];
            document.getElementById('news-text').innerText = current.text;
            document.getElementById('rep-info').innerText = "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§∞: " + current.reporter;

            videoPlayer.src = current.videoUrl;
            videoPlayer.oncanplay = () => videoPlayer.play();

            window.speechSynthesis.cancel();
            const speech = new SpeechSynthesisUtterance("‡§¨‡§°‡§º‡•Ä ‡§ñ‡§¨‡§∞... " + current.text);
            speech.lang = 'hi-IN';
            speech.rate = 0.9;

            speech.onend = () => {
                setTimeout(() => {
                    currentIndex = (currentIndex + 1) % newsQueue.length;
                    // ‡§π‡§∞ ‡§ñ‡§¨‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§°‡•á‡§ü‡§æ ‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§®‡§à 'Approved' ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§ú‡•Å‡•ú ‡§∏‡§ï‡•á‡§Ç
                    fetchNews().then(playNext);
                }, 3000);
            };

            window.speechSynthesis.speak(speech);
        }

        function startEngine() {
            document.getElementById('start-btn').style.display = 'none';
            fetchNews().then(() => {
                if(newsQueue.length > 0) playNext();
                else alert("‡§∂‡•Ä‡§ü ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§ñ‡§¨‡§∞ 'Approved' ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä!");
            });
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>PTN NEWS - REPORTER LIVE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@700;900&display=swap');
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Noto Sans Devanagari', sans-serif; }
        #reporter-video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; background: #000; }
        .ui-overlay { position: relative; width: 100%; height: 100%; z-index: 10; display: flex; flex-direction: column; justify-content: flex-end; pointer-events: none; }
        .breaking-tag { position: absolute; top: 40px; left: 0; background: #cc0000; color: #fff; padding: 15px 40px; font-size: 45px; font-weight: 900; border-right: 10px solid #ffcc00; }
        .rep-label { position: absolute; bottom: 260px; left: 30px; background: rgba(0,0,0,0.8); color: #ffcc00; padding: 10px 30px; font-size: 28px; border-left: 8px solid #ffcc00; }
        .headline-box { width: 100%; background: linear-gradient(to top, #000 90%, transparent); padding: 50px 20px; border-top: 10px solid #ffcc00; box-sizing: border-box; }
        .headline-text { color: #fff; font-size: 52px; text-align: center; margin: 0; font-weight: 700; line-height: 1.3; text-shadow: 3px 3px 10px #000; }
        #start-btn { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; color: #ffcc00; text-align: center; }
    </style>
</head>
<body>

    <div id="start-btn" onclick="startEngine()">
        <h1 style="font-size: 60px; margin: 0;">PTN LIVE STUDIO</h1>
        <p style="color: white; font-size: 24px;">[ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§á‡§Ç‡§ú‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ]</p>
    </div>

    <video id="reporter-video" muted playsinline preload="auto"></video>

    <div class="ui-overlay">
        <div class="breaking-tag">LIVE REPORTING</div>
        <div id="rep-info" class="rep-label">‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§∞: ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡§ø‡§Ç‡§ó...</div>
        <div class="headline-box">
            <p id="news-text" class="headline-text">‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...</p>
        </div>
    </div>

    <script>
        let newsQueue = [];
        let currentIndex = 0;
        const videoPlayer = document.getElementById('reporter-video');
        
        // üõë ‡§Ö‡§™‡§®‡§æ URL ‡§Ø‡§π‡§æ‡§Å ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
        const apiURL = "https://script.google.com/macros/s/AKfycbxdC0A-qyh_zT4zIcXWsWoCpNfkooytB-B0z3UXTWyWDqseUVHZOd6iQIweMx4vI0GfZA/exec"; 

        // Google Drive ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•ã Direct Video ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function fixDriveLink(url) {
            if (url.includes('drive.google.com')) {
                let id = url.split('/d/')[1].split('/')[0];
                return `https://docs.google.com/get_video_info?docid=${id}`;
            }
            return url;
        }

        async function fetchNews() {
            try {
                const response = await fetch(apiURL);
                const data = await response.json();
                if (data && data.length > 0) {
                    newsQueue = data;
                }
            } catch (e) { console.error("Data Fetch Error"); }
        }

        function playNext() {
            if (newsQueue.length === 0) {
                setTimeout(fetchAndStart, 3000);
                return;
            }

            const current = newsQueue[currentIndex];
            document.getElementById('news-text').innerText = current.text;
            document.getElementById('rep-info').innerText = "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡§∞: " + current.reporter;

            // ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•ã ‡§´‡§ø‡§ï‡•ç‡§∏ ‡§ï‡§∞‡§ï‡•á ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
            videoPlayer.src = fixDriveLink(current.videoUrl);
            videoPlayer.load();
            videoPlayer.play().catch(e => console.log("Video Play Error"));

            window.speechSynthesis.cancel();
            const speech = new SpeechSynthesisUtterance("‡§¨‡§°‡§º‡•Ä ‡§ñ‡§¨‡§∞... " + current.text);
            speech.lang = 'hi-IN';
            speech.rate = 0.9;

            speech.onend = () => {
                setTimeout(() => {
                    currentIndex = (currentIndex + 1) % newsQueue.length;
                    fetchNews().then(playNext);
                }, 3000);
            };

            window.speechSynthesis.speak(speech);
        }

        async function fetchAndStart() {
            await fetchNews();
            if (newsQueue.length > 0) playNext();
            else {
                document.getElementById('news-text').innerText = "‡§ï‡•ã‡§à ‡§Ö‡§™‡•ç‡§∞‡•Ç‡§µ‡•ç‡§° ‡§ñ‡§¨‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§ ‡§∂‡•Ä‡§ü ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§";
                setTimeout(fetchAndStart, 5000);
            }
        }

        function startEngine() {
            document.getElementById('start-btn').style.display = 'none';
            fetchAndStart();
        }
    </script>
</body>
</html>
